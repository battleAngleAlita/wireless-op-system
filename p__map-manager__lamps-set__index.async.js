(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{NNpg:function(e,a,t){"use strict";t.r(a);t("+L6B");var n=t("2/Rp"),l=(t("5NDa"),t("5rEg")),s=(t("14J3"),t("BMrR")),r=t("d6i3"),i=t.n(r),p=t("1l/V"),c=t.n(p),d=(t("Pwec"),t("CtXQ")),o=(t("OaEy"),t("2fM7")),m=(t("y8nQ"),t("Vl3Y")),u=(t("B9cy"),t("Ol7k")),h=t("q1tI"),g=t.n(h),b=t("3a4m"),v=t.n(b),x=t("/MKj"),C=t("LvDl"),E=t("Q4F3"),f=t("lG6i"),y=t("VCr4"),I=t("9/Jl"),w=t("7aC0"),M=t.n(w),N=t("LXeP"),S=t.n(N),k=u["a"].Content,A=m["a"].Item,V=o["a"].Option,L=d["a"].createFromIconfontCN({scriptUrl:f["a"]}),_=[{title:"\u5730\u56fe\u540d\u79f0",dataIndex:"mapName",editable:!0},{title:"\u706f\u5177\u7f16\u53f7",dataIndex:"lampCode",editable:!0},{title:"\u578b\u53f7",dataIndex:"model",editable:!0},{title:"\u6a2a\u5750\u6807",dataIndex:"xCoordinate",editable:!0},{title:"\u7eb5\u5750\u6807",dataIndex:"yCoordinate",editable:!0},{title:"\u6240\u5c5e\u533a\u57df",dataIndex:"regionalName",editable:!0},{title:"\u51fa\u5165\u53e3",dataIndex:"entranceExit",editable:!0},{title:"\u51fa\u5165\u53e3\u987a\u5e8f",dataIndex:"sort",editable:!0},{title:"\u5907\u6ce8",dataIndex:"remark",editable:!0}];class j extends g.a.Component{constructor(e){super(e),this.addUser=(()=>{v.a.push("/map-manager/lamps-set/add")}),this.setupMapArea=(()=>{var e=this.props.allAreas;return g.a.createElement(o["a"],{className:S.a.select_text,defaultValue:e[0].name,onSelect:this.onMapSelectChange},e.map((e,a)=>g.a.createElement(V,{value:e.id,key:e.id||a},e.name)))}),this.onMapSelectChange=(e=>{this.setState({areaSelectValue:e})}),this.onInputChange=(e=>{this.setState({lampInputValue:e.target.value})}),this.onSearch=(()=>{var e=this.state,a=e.lampInputValue,t=e.areaSelectValue;this.getAllMapLamps({regionalId:t,lampCode:a})}),this.onClear=(()=>{this.setState({lampInputValue:"",areaSelectValue:""}),this.forceUpdate(()=>{this.onSearch()})}),this.getAllMapLamps=this.getAllMapLamps.bind(this),this.updateData=this.updateData.bind(this),this.deleteColumn=this.deleteColumn.bind(this),this.state={lampInputValue:"",areaSelectValue:""}}getAllMapLamps(){var e=this,a=arguments;return c()(i.a.mark(function t(){var n,l;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,Object(y["h"])(n);case 3:l=t.sent,e.props.dispatch({type:"mapManager/update",payload:{lamps:l.result}});case 5:case"end":return t.stop()}},t)}))()}updateData(e,a){var t=this;return c()(i.a.mark(function n(){var l;return i.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(y["n"])(a);case 2:l=n.sent,l&&t.props.dispatch({type:"mapManager/update",payload:{lamps:{records:e}}});case 4:case"end":return n.stop()}},n)}))()}deleteColumn(e){var a=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["d"])({id:e.id});case 2:a.getAllMapLamps();case 3:case"end":return t.stop()}},t)}))()}componentDidMount(){var e=this;return c()(i.a.mark(function a(){var t;return i.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getAllMapLamps();case 2:return a.next=4,Object(I["a"])();case 4:t=a.sent,e.props.dispatch({type:"commonState/update",payload:{allAreas:t.result}});case 6:case"end":return a.stop()}},a)}))()}render(){var e=this.props,a=e.lamps,t=e.allAreas;if(C["isEmpty"](a)||C["isEmpty"](t))return null;var r=a.records,i=a.total;return r=r.map((e,a)=>{return C["assign"](e,{key:e.id||a})}),g.a.createElement("div",{className:S.a.public_hight},g.a.createElement(k,{className:S.a.bg},g.a.createElement("div",{className:M.a.public_hight_40},g.a.createElement(m["a"],{layout:"inline"},g.a.createElement(s["a"],{justify:"start",align:"middle",style:{paddingLeft:"39px"},gutter:16},g.a.createElement(A,{label:"\u7f16\u53f7"},g.a.createElement(l["a"],{className:S.a.input_text,placeholder:"\u8bf7\u8f93\u5165\u7f16\u53f7",value:this.state.lampInputValue,onChange:this.onInputChange})),g.a.createElement(A,{label:"\u533a\u57df"},g.a.createElement("div",{style:{marginTop:"-3px"}},this.setupMapArea())),g.a.createElement("span",{className:S.a.button_type},g.a.createElement(n["a"],{className:S.a.form_btn,onClick:this.onSearch},"\u67e5\u8be2"),g.a.createElement(n["a"],{className:S.a.form_btn,style:{marginLeft:37},onClick:this.onClear},"\u6e05\u7a7a")),g.a.createElement("span",{className:["".concat(S.a.form_btns)].join(" ")},g.a.createElement("span",{className:["".concat(S.a.form_btn_add)].join(""),onClick:this.addUser},g.a.createElement(L,{type:"icon-plus"})))))),g.a.createElement(E["a"],{columns:_,data:r,total:i,updateData:this.updateData,deleteColumn:this.deleteColumn})))}}var D=e=>{var a=e.mapManager,t=e.commonState,n=a.lamps,l=t.allAreas;return{lamps:n,allAreas:l}};a["default"]=Object(x["c"])(D)(j)}}]);