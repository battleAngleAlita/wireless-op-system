(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"2hfb":function(e,t,a){e.exports={bg:"bg___oVkf-",no_bg:"no_bg___1YDHA",system_name:"system_name___2ZjZ9",titleContainer:"titleContainer___1p6Zo",title:"title___3F8Ha",content:"content___1Bpdt",loginPanel:"loginPanel___NVwq4",login_form:"login_form___26nAe",login_title:"login_title___2aelP",redio_style:"redio_style___1tf20",login_main:"login_main___21pQe",login_button:"login_button___3PwWP",rolename:"rolename___3-y_D",foot_text:"foot_text___2MQZn",right_top_panel:"right_top_panel___2ueBJ",date_string:"date_string___2WOM7",time_string:"time_string___21jIb"}},A8du:function(e,t,a){"use strict";a.r(t);a("jCWc");var n=a("kPKH"),r=(a("14J3"),a("BMrR")),s=(a("Pwec"),a("CtXQ")),l=(a("B9cy"),a("Ol7k")),o=a("q1tI"),c=a.n(o),i=(a("+L6B"),a("2/Rp")),m=(a("5NDa"),a("5rEg")),u=(a("7Kak"),a("9yH6")),_=(a("y8nQ"),a("Vl3Y")),p=(a("miYZ"),a("tsqr")),g=a("d6i3"),h=a.n(g),d=a("1l/V"),f=a.n(d),E=a("3a4m"),b=a.n(E),v=a("io9h"),y=a("/MKj"),w=a("lG6i"),x=a("9/Jl"),j=a("2hfb"),N=a.n(j),S=s["a"].createFromIconfontCN({scriptUrl:w["a"]});class k extends c.a.Component{constructor(e){super(e),this.onChange=(e=>{this.setState({value:e.target.value})}),this.state={value:1},this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(e){var t=this;return f()(h.a.mark(function a(){return h.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.preventDefault(),t.props.form.validateFields(function(){var e=f()(h.a.mark(function e(a,n){var r,s,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=17;break}return r={username:n.username,password:n.password},t.showLoadingMessage(),e.next=5,Object(v["a"])("http://47.95.195.189:8086/jeecg-boot/intf/location/login?username=".concat(r.username,"&password=").concat(r.password),{method:"GET"});case 5:if(s=e.sent,200!==s.code||!s.success){e.next=14;break}return l=s.result.token,localStorage.setItem("token",l),e.next=11,t.preFetchAllCommonState();case 11:b.a.push("/system-setting/customer-manager"),e.next=17;break;case 14:return t.showErrorMessage("\u8d26\u53f7\u6216\u5bc6\u7801\u8f93\u5165\u4e0d\u6b63\u5e38\uff0c\u767b\u5f55\u5931\u8d25"),e.next=17,t.preFetchAllCommonState();case 17:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return a.stop()}},a)}))()}preFetchAllCommonState(){var e=this;return f()(h.a.mark(function t(){var a,n,r,s,l,o,c,i;return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(x["e"])();case 2:return a=t.sent,t.next=5,Object(x["a"])();case 5:return n=t.sent,t.next=8,Object(x["f"])();case 8:return r=t.sent,t.next=11,Object(x["d"])();case 11:return s=t.sent,t.next=14,Object(x["h"])();case 14:return l=t.sent,t.next=17,Object(x["c"])();case 17:return o=t.sent,t.next=20,Object(x["b"])();case 20:return c=t.sent,t.next=23,Object(x["g"])();case 23:i=t.sent,e.props.dispatch({type:"commonState/update",payload:{allUserInfo:l.result,allMap:a.result,allRoles:r.result,allLevels:s.result,allFencingTypes:o.result,allAreas:n.result,allDuties:c.result.records,allSecretLevel:i.result.records}});case 25:case"end":return t.stop()}},t)}))()}showLoadingMessage(){p["a"].loading("\u52aa\u529b\u767b\u5f55\u4e2d...",0)}showMessage(){p["a"].success("\u606d\u559c\u60a8\uff0c\u767b\u5f55\u6210\u529f!",1e3)}showErrorMessage(e){p["a"].error(e,1e3)}componentWillUnmount(){p["a"].destroy()}render(){var e=this.props.form.getFieldDecorator;return c.a.createElement("div",{className:N.a.login_form},c.a.createElement("div",{className:N.a.login_title},"\u6b22\u8fce\u767b\u5f55"),c.a.createElement(_["a"],{onSubmit:this.handleSubmit,className:N.a.login_main},c.a.createElement("div",{className:N.a.redio_style},c.a.createElement(u["a"].Group,null,c.a.createElement(u["a"],{value:1},c.a.createElement("span",{className:N.a.rolename},"\u7cfb\u7edf\u7ba1\u7406\u5458 ")),c.a.createElement(u["a"],{value:2},c.a.createElement("span",{className:N.a.rolename},"\u503c\u73ed\u5458")))),c.a.createElement(_["a"].Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(c.a.createElement(m["a"],{prefix:c.a.createElement(S,{type:"icon-user"}),placeholder:"\u767b\u5f55\u540d"}))),c.a.createElement(_["a"].Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(c.a.createElement(m["a"],{prefix:c.a.createElement(S,{type:"icon-key"}),type:"password",placeholder:"\u5bc6\u7801"}))),c.a.createElement(_["a"].Item,null,c.a.createElement(r["a"],{type:"flex",justify:"center",style:{height:"100%"}},c.a.createElement(n["a"],{span:12},c.a.createElement(i["a"],{type:"primary",htmlType:"submit",onClick:this.handleSubmit,className:N.a.login_button},"\u767b\u5f55"))))))}}var C=_["a"].create({name:"normal_login"})(k),M=e=>{var t=e.commonState,a=t;return{commonState:a}},O=Object(y["c"])(M)(C);a.d(t,"default",function(){return D});var F=l["a"].Header,I=l["a"].Content,P=l["a"].Footer;s["a"].createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1464236_mya4evtbh9i.js"});class D extends o["Component"]{constructor(e){super(e),this.getYear=(e=>{return"".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate())}),this.getTime=(e=>{var t=10===e.toLocaleTimeString().length?"0".concat(e.toLocaleTimeString()):e.toLocaleTimeString();return t.substr(0,5).split("").filter(e=>":"!==e)});var t=new Date;this.state={year:this.getYear(t),time:this.getTime(t)}}componentDidMount(){this.timer=setInterval(()=>{var e=new Date;this.setState({year:this.getYear(e),time:this.getTime(e)})},1e3)}componentWillUnmount(){clearInterval(this.timer),this.timer=null}render(){var e=this.state;return c.a.createElement(l["a"],{className:N.a.bg},c.a.createElement("div",{className:N.a.right_top_panel},c.a.createElement("div",{className:N.a.date_string},this.state.year),c.a.createElement("div",{className:N.a.time_string},c.a.createElement("span",null,e.time[0]),c.a.createElement("span",null,e.time[1]),":",c.a.createElement("span",null,e.time[2]),c.a.createElement("span",null,e.time[3]))),c.a.createElement(F,{className:["".concat(N.a.no_bg)].join(" ")},c.a.createElement(r["a"],{type:"flex",justify:"center",align:"middle",style:{position:"relative",top:"1rem"}},c.a.createElement(n["a"],{span:12},c.a.createElement("div",{className:N.a.system_name})))),c.a.createElement(I,{className:["".concat(N.a.no_bg)].join(" ")},c.a.createElement(r["a"],{type:"flex",justify:"center",style:{height:"100%"}},c.a.createElement(n["a"],{span:10},c.a.createElement("div",{className:N.a.loginPanel},c.a.createElement(O,null))))),c.a.createElement(P,{className:["".concat(N.a.no_bg)].join(" ")},c.a.createElement("div",{className:N.a.foot_text},"\xa9\u667a\u8c37\u5149\u9891\u4ea7\u4e1a\u7814\u7a76\u9662")))}}}}]);